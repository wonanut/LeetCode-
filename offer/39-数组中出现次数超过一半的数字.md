剑指Offer典型题整理 - 争取做最好的题解

# 剑指Offer39-数组中出现次数超过一半的数字

整理时间：2020年02月26日

*本题与 LeetCode 169题相同*



### 1 题目描述

数组中有一个数字出现的次数超过数组长度的一半，请找出这个数字。

你可以假设数组是非空的，并且给定的数组总是存在多数元素。



**示例**

```
输入: [1, 2, 3, 2, 2, 2, 5, 4, 2]
输出: 2
```



**限制：**

- 1 <= 数组长度 <= 50000



### 2 题解

这道题很简单，在LeetCode上是`Easy`级别的题目，但是有一种解法很有趣，分享一下。

首先这道题比较传统的解法至少有如下几种，都很简单：

- hash：时间复杂度$O(n)$，空间复杂度$O(n)$
- 排序：时间复杂度$O(nlogn)$，空间复杂度$O(1)$
- 分治：时间复杂度$O(nlogn)$，空间复杂度$O(logn)$



这里使用**多数投票算法Boyer-Moore**完成这道题，时间复杂度$O(n)$，空间复杂度$O(1)$先看代码：

`C++代码`

```cpp
class Solution {
public:
    int majorityElement(vector<int>& nums) {
        int cur = nums[0], count = 0;
        for (auto num : nums) {
            if (count == 0) {
                cur = num;
                count = 1;
            }
            else if (num == cur) {
                count ++;
            }
            else {
                count --;
            }
        }
        return cur;
    }
};
```

唔，为什么上面的代码就能完成这件事呢？这是什么原理呢？

在我挠掉了25根头发之后，我终于想明白了这个算法的原理。其实就和人海战术一样，举个栗子，现在A国和B国要打起来了，已知：

![](images/39.jpg)

- A国有士兵20人，B国有士兵21人
- 两国除了士兵没有其他战斗装备
- 两国士兵战斗力相等

问：这两国干一架之后哪个国家会赢？

只要上过幼儿园肯定能回答出来：B国赢了，因为他们人多。Boyer-Moore算法同理，因为已知某一个数的出现次数大于其他数字之和，两边的元素两两抵消，最终剩下的一定是我们要的答案，步骤如下：

- 初始：设置计数器count=0，天选之子cur = nums[0]，从左往右依次遍历
  - 如果count=0，那说明双方两败俱伤，将当前数字设置为cur，重新设置count=1
  - 如果当前位置的数字也是cur，那么cur的票数+1（count++）
  - 如果当前位置的数字不是cur，那么cur的票数-1（count--）
- 如此遍历一遍，剩下的那个cur就是多数方留下来的**天选之子**，游戏结束。



(完)

